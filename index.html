<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApexVerse: Ultimate Animal Showdown</title>
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --bg-dark: #0a0a0a;
            --card-bg: #1a1a1a;
        }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid var(--neon-blue);
            width: 100%;
            box-shadow: 0 0 15px var(--neon-blue);
            margin-bottom: 20px;
        }

        .container {
            width: 90%;
            max-width: 1000px;
            text-align: center;
        }

        /* SCREEN: Selection */
        #selection-screen {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .select-card {
            background: var(--card-bg);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: 0.3s;
        }

        .select-card:hover {
            border-color: var(--neon-blue);
            transform: translateY(-5px);
            box-shadow: 0 0 15px var(--neon-blue);
        }

        /* SCREEN: Battle */
        #battle-screen { display: none; }

        .battle-arena {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 20px 0;
        }

        .animal-card {
            background: var(--card-bg);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 20px;
            width: 45%;
        }

        .active-turn {
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue);
        }

        .hp-bar-bg {
            background: #444;
            height: 20px;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .hp-bar-fill {
            background: linear-gradient(90deg, #00ff00, #aaff00);
            height: 100%;
            width: 100%;
            transition: width 0.5s ease;
        }

        .move-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            background: transparent;
            color: white;
            border: 1px solid var(--neon-blue);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        button:hover:not(:disabled) {
            background: var(--neon-blue);
            color: black;
        }

        button:disabled { opacity: 0.3; cursor: not-allowed; }

        #fact-box {
            margin-top: 20px;
            padding: 15px;
            border-left: 4px solid var(--neon-pink);
            background: #222;
            min-height: 60px;
            font-style: italic;
        }

        /* SCREEN: Quiz */
        #quiz-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .quiz-card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid var(--neon-pink);
            max-width: 600px;
            width: 90%;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

    <header>
        <h1 style="margin:0; letter-spacing: 3px;">APEXVERSE</h1>
        <div style="color: var(--neon-blue)">Where Nature’s Legends Collide</div>
    </header>

    <div class="container">
        
        <!-- Selection Screen -->
        <div id="selection-screen">
            <h2 style="grid-column: 1/-1;">Select Your Animal Legend</h2>
            <!-- Animals will be injected here -->
        </div>

        <!-- Battle Screen -->
        <div id="battle-screen">
            <div class="battle-arena">
                <div id="p1-card" class="animal-card">
                    <h2 id="p1-name">---</h2>
                    <div id="p1-hp-text">HP: 100/100</div>
                    <div class="hp-bar-bg"><div id="p1-hp-fill" class="hp-bar-fill"></div></div>
                </div>

                <div id="p2-card" class="animal-card">
                    <h2 id="p2-name">---</h2>
                    <div id="p2-hp-text">HP: 100/100</div>
                    <div class="hp-bar-bg"><div id="p2-hp-fill" class="hp-bar-fill"></div></div>
                </div>
            </div>

            <div id="move-controls" class="animal-card" style="width: 100%; box-sizing: border-box;">
                <h3 id="turn-text">Your Turn!</h3>
                <div id="move-buttons" class="move-grid"></div>
                <div id="fact-box">Choose a move to see real-world animal facts!</div>
            </div>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-overlay">
        <div class="quiz-card">
            <h2 id="winner-announcement">Winner!</h2>
            <hr border-color="var(--neon-pink)">
            <p id="quiz-question">Question...</p>
            <div id="quiz-options" class="move-grid"></div>
            <p id="quiz-feedback" style="margin-top:20px; font-weight: bold;"></p>
        </div>
    </div>

    <script>
        const animalData = {
            elephant: {
                name: "African Elephant",
                hp: 500, maxHp: 500,
                moves: [
                    { name: "Ground Stomp", damage: 45, fact: "Elephants can 'hear' with their feet by sensing subsonic vibrations in the ground!" },
                    { name: "Trunk Slam", damage: 35, fact: "An elephant's trunk has 40,000 muscles—a human has only about 600 in their whole body!" },
                    { name: "Tusk Charge", damage: 55, fact: "Elephant tusks are actually giant teeth that never stop growing." },
                    { name: "Memory Shield", damage: 0, heal: 40, fact: "Elephants have incredible memories, helping them find water holes during droughts." }
                ]
            },
            falcon: {
                name: "Peregrine Falcon",
                hp: 200, maxHp: 200,
                moves: [
                    { name: "Sky Dive", damage: 65, fact: "The Peregrine Falcon is the fastest animal on Earth, diving at over 200 mph!" },
                    { name: "Talon Strike", damage: 30, fact: "Their talons can exert enough pressure to catch prey mid-air instantly." },
                    { name: "Vision Lock", damage: 25, fact: "Falcons can see a small bird from over a mile away." },
                    { name: "Aerial Feint", damage: 15, fact: "Falcons use their tail feathers like a rudder to make sharp turns at high speeds." }
                ]
            },
            shark: {
                name: "Great White Shark",
                hp: 350, maxHp: 350,
                moves: [
                    { name: "Apex Bite", damage: 50, fact: "Great Whites have up to 300 serrated teeth arranged in several rows!" },
                    { name: "Electro-Sense", damage: 20, fact: "Sharks can sense the tiny electrical fields generated by the heartbeats of prey." },
                    { name: "Tail Thrash", damage: 30, fact: "A shark's tail is its engine; they can swim up to 15 mph in short bursts." },
                    { name: "Deep Dive", damage: 0, heal: 35, fact: "Sharks don't have bones; their skeletons are made of lightweight cartilage like your ears!" }
                ]
            }
        };

        let player, enemy;
        let isPlayerTurn = true;

        // INITIALIZE: Show Selection Screen
        function initSelection() {
            const screen = document.getElementById('selection-screen');
            Object.keys(animalData).forEach(key => {
                const animal = animalData[key];
                const div = document.createElement('div');
                div.className = 'select-card';
                div.innerHTML = `<h3>${animal.name}</h3><p>HP: ${animal.hp}</p><p style="font-size:0.8rem; color:var(--neon-blue)">Click to Choose</p>`;
                div.onclick = () => startBattle(key);
                screen.appendChild(div);
            });
        }

        function startBattle(playerKey) {
            // Setup Player
            player = JSON.parse(JSON.stringify(animalData[playerKey]));
            
            // Setup Enemy (Randomly pick one that isn't the player)
            const keys = Object.keys(animalData);
            let enemyKey = keys[Math.floor(Math.random() * keys.length)];
            enemy = JSON.parse(JSON.stringify(animalData[enemyKey]));

            // UI Transitions
            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('battle-screen').style.display = 'block';
            
            document.getElementById('p1-name').innerText = player.name;
            document.getElementById('p2-name').innerText = enemy.name;
            
            updateUI();
            renderPlayerMoves();
        }

        function updateUI() {
            // Player HP
            document.getElementById('p1-hp-fill').style.width = (player.hp / player.maxHp * 100) + "%";
            document.getElementById('p1-hp-text').innerText = `HP: ${Math.max(0, player.hp)} / ${player.maxHp}`;
            
            // Enemy HP
            document.getElementById('p2-hp-fill').style.width = (enemy.hp / enemy.maxHp * 100) + "%";
            document.getElementById('p2-hp-text').innerText = `HP: ${Math.max(0, enemy.hp)} / ${enemy.maxHp}`;

            // Check Win/Loss
            if (player.hp <= 0 || enemy.hp <= 0) {
                setTimeout(showQuiz, 1000);
            }
        }

        function renderPlayerMoves() {
            const container = document.getElementById('move-buttons');
            container.innerHTML = '';
            player.moves.forEach(move => {
                const btn = document.createElement('button');
                btn.innerText = move.name;
                btn.onclick = () => executeMove(move, player, enemy);
                container.appendChild(btn);
            });
        }

        function executeMove(move, attacker, target) {
            if (!isPlayerTurn && attacker === player) return;

            target.hp -= move.damage;
            if (move.heal) attacker.hp = Math.min(attacker.maxHp, attacker.hp + move.heal);

            document.getElementById('fact-box').innerHTML = `<strong>${move.name}:</strong> ${move.fact}`;
            updateUI();

            if (target.hp > 0) {
                isPlayerTurn = !isPlayerTurn;
                document.getElementById('turn-text').innerText = isPlayerTurn ? "Your Turn!" : `${enemy.name} is attacking...`;
                document.getElementById('p1-card').classList.toggle('active-turn');
                document.getElementById('p2-card').classList.toggle('active-turn');
                
                if (!isPlayerTurn) {
                    setTimeout(enemyTurn, 2000);
                    toggleButtons(true);
                } else {
                    toggleButtons(false);
                }
            }
        }

        function enemyTurn() {
            const move = enemy.moves[Math.floor(Math.random() * enemy.moves.length)];
            executeMove(move, enemy, player);
        }

        function toggleButtons(disabled) {
            const btns = document.querySelectorAll('#move-buttons button');
            btns.forEach(b => b.disabled = disabled);
        }

        function showQuiz() {
            const winner = player.hp > 0 ? player.name : enemy.name;
            document.getElementById('quiz-overlay').style.display = 'flex';
            document.getElementById('winner-announcement').innerText = `${winner} Wins the Showdown!`;
            
            // Basic logic-based question
            const q = {
                text: `How many muscles are in an Elephant's trunk?`,
                options: ["600", "4,000", "40,000", "1 million"],
                correct: 2
            };

            document.getElementById('quiz-question').innerText = q.text;
            const optContainer = document.getElementById('quiz-options');
            optContainer.innerHTML = '';
            
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.innerText = opt;
                btn.onclick = () => {
                    if(idx === q.correct) {
                        document.getElementById('quiz-feedback').innerText = "Correct! You are a Nature Legend!";
                        document.getElementById('quiz-feedback').style.color = "var(--neon-blue)";
                    } else {
                        document.getElementById('quiz-feedback').innerText = "Not quite! The answer is 40,000.";
                        document.getElementById('quiz-feedback').style.color = "var(--neon-pink)";
                    }
                    setTimeout(() => location.reload(), 3000);
                };
                optContainer.appendChild(btn);
            });
        }

        // Start
        initSelection();
    </script>
</body>
</html>
