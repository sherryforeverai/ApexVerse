<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApexVerse: Ultimate Animal Showdown</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Bangers&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-yellow: #f0ff00;
            --bg-dark: #050505;
        }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        header {
            text-align: center;
            padding: 20px;
            border-bottom: 3px solid var(--neon-blue);
            width: 100%;
            box-shadow: 0 0 20px var(--neon-blue);
            background: rgba(0,0,0,0.9);
            position: sticky; top: 0; z-index: 100;
        }

        h1 { font-family: 'Bangers', cursive; font-size: 3rem; margin: 0; color: var(--neon-blue); text-shadow: 0 0 10px var(--neon-blue); }

        .container { width: 95%; max-width: 1200px; margin-top: 20px; }

        /* SELECTION SCREEN */
        .search-area { 
            background: #111; padding: 20px; border-radius: 20px; border: 1px solid var(--neon-blue);
            margin-bottom: 30px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; 
        }
        #search-bar { padding: 12px; width: 300px; border-radius: 30px; border: 2px solid var(--neon-blue); background: #000; color: white; }
        
        .filter-btn { padding: 10px 18px; border-radius: 20px; border: 1px solid var(--neon-pink); background: transparent; color: white; cursor: pointer; font-size: 0.8rem; }
        .filter-btn.active { background: var(--neon-pink); color: black; box-shadow: 0 0 10px var(--neon-pink); }

        .selection-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 20px; padding: 10px;
        }

        .select-card {
            background: #151515; border: 1px solid #333; border-radius: 15px; padding: 10px;
            text-align: center; transition: 0.3s; cursor: pointer;
        }
        .select-card:hover { border-color: var(--neon-blue); transform: translateY(-5px); box-shadow: 0 0 15px var(--neon-blue); }
        .select-card img { width: 100%; border-radius: 10px; height: 130px; object-fit: cover; margin-bottom: 8px; }
        .select-card h3 { font-size: 1rem; margin: 5px 0; color: var(--neon-blue); }

        /* BATTLE SCREEN */
        #battle-screen { display: none; }
        .battle-arena { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
        .fighter-pod { width: 45%; min-width: 300px; text-align: center; background: #111; padding: 15px; border-radius: 20px; border: 1px solid #333; }
        .fighter-img { width: 100%; height: 250px; object-fit: cover; border-radius: 15px; border: 2px solid var(--neon-blue); }
        .hp-bar-bg { background: #333; height: 20px; border-radius: 10px; overflow: hidden; margin: 10px 0; border: 1px solid #555; }
        .hp-bar-fill { background: linear-gradient(90deg, #00ff00, #aaff00); height: 100%; width: 100%; transition: width 0.5s ease; }
        .move-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .move-btn { padding: 15px; border-radius: 10px; border: 1px solid var(--neon-blue); background: transparent; color: white; font-family: 'Orbitron'; font-size: 0.8rem; cursor: pointer; }
        .move-btn:hover { background: var(--neon-blue); color: black; }

        /* SPEECH BUBBLE MODAL */
        #fact-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9);
            display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .speech-bubble {
            background: white; color: black; padding: 30px; border-radius: 40px; max-width: 500px; width: 85%;
            font-size: 1.5rem; font-family: 'Bangers', cursive; text-align: center; border: 6px solid var(--neon-blue);
        }
        .next-btn { margin-top: 20px; padding: 12px 25px; background: var(--neon-pink); border: none; border-radius: 20px; color: white; cursor: pointer; font-family: 'Orbitron'; }

        /* QUIZ */
        #quiz-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; }
        .quiz-card { background: #111; padding: 30px; border-radius: 20px; border: 2px solid var(--neon-pink); text-align: center; width: 90%; max-width: 500px; }
    </style>
</head>
<body>

    <header>
        <h1>APEXVERSE</h1>
        <div style="color: var(--neon-pink); font-size: 0.9rem;">200+ LEGENDS â€¢ CHOOSE YOUR FIGHTER</div>
    </header>

    <div class="container">
        <!-- SELECTION -->
        <div id="selection-screen">
            <div class="search-area">
                <input type="text" id="search-bar" placeholder="Search Animal Name..." oninput="filterAnimals()">
                <button class="filter-btn active" onclick="setCategory('All')">All</button>
                <button class="filter-btn" onclick="setCategory('Land')">Land</button>
                <button class="filter-btn" onclick="setCategory('Ocean')">Ocean</button>
                <button class="filter-btn" onclick="setCategory('Birds')">Birds</button>
                <button class="filter-btn" onclick="setCategory('Fish')">Fish</button>
                <button class="filter-btn" onclick="setCategory('Reptiles')">Reptiles</button>
                <button class="filter-btn" onclick="setCategory('Insects')">Insects</button>
            </div>
            <div class="selection-grid" id="selection-grid"></div>
        </div>

        <!-- BATTLE -->
        <div id="battle-screen">
            <div class="battle-arena">
                <div class="fighter-pod">
                    <img id="p1-img" class="fighter-img" src="" alt="">
                    <h2 id="p1-name" style="color: var(--neon-blue);"></h2>
                    <div class="hp-bar-bg"><div id="p1-hp-fill" class="hp-bar-fill"></div></div>
                    <div id="p1-hp-text"></div>
                </div>
                <div class="fighter-pod">
                    <img id="p2-img" class="fighter-img" src="" alt="">
                    <h2 id="p2-name" style="color: var(--neon-pink);"></h2>
                    <div class="hp-bar-bg"><div id="p2-hp-fill" class="hp-bar-fill"></div></div>
                    <div id="p2-hp-text"></div>
                </div>
            </div>
            <div id="move-buttons" class="move-grid"></div>
        </div>
    </div>

    <!-- FACT BUBBLE -->
    <div id="fact-overlay">
        <div class="speech-bubble">
            <div id="fact-text"></div>
            <button class="next-btn" onclick="closeFact()">NEXT >> </button>
        </div>
    </div>

    <!-- QUIZ -->
    <div id="quiz-overlay">
        <div class="quiz-card">
            <h2 id="quiz-title">BATTLE QUIZ</h2>
            <p id="quiz-q-num"></p>
            <p id="quiz-question" style="font-size: 1.2rem;"></p>
            <div id="quiz-options" class="move-grid"></div>
            <div id="quiz-score-screen" style="display:none">
                <h1 style="color: var(--neon-yellow)">FINAL SCORE</h1>
                <h2 id="final-score-val" style="font-size: 3rem;">0/4</h2>
                <button class="move-btn" onclick="location.reload()" style="width: 100%;">PLAY AGAIN</button>
            </div>
        </div>
    </div>

    <script>
        // MASSIVE DATABASE (Sample of 30 animals across categories)
        const animalDatabase = [
            // LAND
            { id: "elephant", name: "African Elephant", cat: "Land", hp: 500, img: "https://loremflickr.com/600/600/elephant,3d,render", moves: [{name: "Ground Stomp", damage: 40, fact: "Elephants feel vibrations through their feet!"}, {name: "Trunk Slam", damage: 35, fact: "Trunks have 40k muscles."}, {name: "Tusk Charge", damage: 50, fact: "Tusks are teeth."}, {name: "Matriarch Call", damage: 0, heal: 30, fact: "Females lead the herd."}]},
            { id: "lion", name: "Lion", cat: "Land", hp: 380, img: "https://loremflickr.com/600/600/lion,3d", moves: [{name: "Pride Pounce", damage: 50, fact: "Lions are social cats."}, {name: "King's Roar", damage: 20, fact: "Roar heard 5 miles away."}, {name: "Claw Slash", damage: 45, fact: "Sleeps 20 hours a day."}, {name: "Ambush", damage: 55, fact: "Females hunt mostly."}]},
            { id: "rhino", name: "Rhino", cat: "Land", hp: 450, img: "https://loremflickr.com/600/600/rhino,3d", moves: [{name: "Horn Gore", damage: 60, fact: "Horns are made of hair protein."}, {name: "Thick Hide", damage: 0, heal: 30, fact: "Skin is 2 inches thick."}, {name: "Mud Wallop", damage: 30, fact: "Mud protects them from sun."}, {name: "Crash Charge", damage: 50, fact: "They can run 30mph."}]},
            { id: "tiger", name: "Siberian Tiger", cat: "Land", hp: 400, img: "https://loremflickr.com/600/600/tiger,3d", moves: [{name: "Striped Strike", damage: 45, fact: "No two tigers have same stripes."}, {name: "Night Vision", damage: 25, fact: "See 6x better than humans."}, {name: "Leap Attack", damage: 55, fact: "Can jump 30 feet!"}, {name: "Heavy Swat", damage: 40, fact: "Paws are size of plates."}]},
            
            // OCEAN
            { id: "shark", name: "Great White Shark", cat: "Ocean", hp: 420, img: "https://loremflickr.com/600/600/shark,3d", moves: [{name: "Apex Bite", damage: 60, fact: "Have 3,000 teeth."}, {name: "Tail Thrash", damage: 30, fact: "Swim 15mph bursts."}, {name: "Heart Sense", damage: 20, fact: "Feel prey heartbeats."}, {name: "Deep Guard", damage: 0, heal: 40, fact: "Bones are made of cartilage."}]},
            { id: "orca", name: "Orca", cat: "Ocean", hp: 480, img: "https://loremflickr.com/600/600/orca,3d", moves: [{name: "Pod Strike", damage: 45, fact: "Orcas are actually dolphins."}, {name: "Sonar Ping", damage: 25, fact: "Use sound to find prey."}, {name: "Wave Breach", damage: 40, fact: "Top ocean predator."}, {name: "Whale Tail", damage: 50, fact: "Tail is 8ft wide."}]},
            { id: "octopus", name: "Giant Octopus", cat: "Ocean", hp: 280, img: "https://loremflickr.com/600/600/octopus,3d", moves: [{name: "Ink Blast", damage: 25, fact: "Have 3 hearts and blue blood."}, {name: "Camo-Strike", damage: 40, fact: "Change color in 1 second."}, {name: "8-Arm Wrap", damage: 50, fact: "Each arm has a brain."}, {name: "Beak Bite", damage: 35, fact: "Only hard part is beak."}]},
            
            // BIRDS
            { id: "falcon", name: "Falcon", cat: "Birds", hp: 250, img: "https://loremflickr.com/600/600/falcon,3d", moves: [{name: "Sky Dive", damage: 75, fact: "Fastest animal (200mph)!"}, {name: "Talon Grip", damage: 35, fact: "Catch prey mid-air."}, {name: "Eagle Eye", damage: 20, fact: "See a mile away."}, {name: "Wing Clip", damage: 25, fact: "Wings are like blades."}]},
            { id: "eagle", name: "Golden Eagle", cat: "Birds", hp: 280, img: "https://loremflickr.com/600/600/eagle,3d", moves: [{name: "Power Dive", damage: 50, fact: "Nests weigh up to a ton."}, {name: "Screech", damage: 20, fact: "Mating for life."}, {name: "Air Catch", damage: 45, fact: "Lift animals their own weight."}, {name: "Feather Guard", damage: 0, heal: 30, fact: "Have 7,000 feathers."}]},
            
            // FISH (NEW CATEGORY)
            { id: "marlin", name: "Blue Marlin", cat: "Fish", hp: 300, img: "https://loremflickr.com/600/600/marlin,fish", moves: [{name: "Bill Spear", damage: 55, fact: "One of the fastest swimmers."}, {name: "Surface Jump", damage: 30, fact: "Jump out of water to escape."}, {name: "Fin Slash", damage: 35, fact: "Color changes when hunting."}, {name: "Ocean Dash", damage: 20, fact: "Migrate 10,000 miles."}]},
            { id: "piranha", name: "Piranha", cat: "Fish", hp: 180, img: "https://loremflickr.com/600/600/piranha,fish", moves: [{name: "Swarm Bite", damage: 60, fact: "Have razor-sharp bark teeth."}, {name: "Snap Attack", damage: 30, fact: "Eat mostly other fish."}, {name: "Hide in Reeds", damage: 0, heal: 40, fact: "Travel in large shoals."}, {name: "Bone Crush", damage: 45, fact: "Strongest bite of all fish."}]},

            // REPTILES
            { id: "croc", name: "Nile Crocodile", cat: "Reptiles", hp: 450, img: "https://loremflickr.com/600/600/crocodile,3d", moves: [{name: "Death Roll", damage: 65, fact: "Strongest bite force ever."}, {name: "Tail Whip", damage: 35, fact: "Live for 100 years."}, {name: "Lurk", damage: 0, heal: 40, fact: "Wait for prey for hours."}, {name: "Snap", damage: 45, fact: "Swallow rocks for digestion."}]},
            { id: "cobra", name: "King Cobra", cat: "Reptiles", hp: 220, img: "https://loremflickr.com/600/600/cobra,3d", moves: [{name: "Venom Strike", damage: 70, fact: "Can kill an elephant in one bite."}, {name: "Hood Flare", damage: 15, fact: "Growl instead of hiss."}, {name: "Fast Slide", damage: 30, fact: "Only snake that builds nests."}, {name: "Hypnotize", damage: 25, fact: "Stand up 1/3 of their length."}]},

            // INSECTS
            { id: "wasp", name: "Hornet", cat: "Insects", hp: 150, img: "https://loremflickr.com/600/600/hornet,insect", moves: [{name: "Stinger", damage: 50, fact: "Can sting multiple times."}, {name: "Swarm", damage: 40, fact: "Live in paper-like nests."}, {name: "Buzz", damage: 20, fact: "Eat mostly other insects."}, {name: "Flight Dash", damage: 25, fact: "Can fly at 25 mph."}]}
        ];

        let player, enemy, isPlayerTurn = true, currentCat = 'All';
        let quizStep = 0, quizScore = 0;

        // UI: Selection & Filter
        function filterAnimals() {
            const search = document.getElementById('search-bar').value.toLowerCase();
            const grid = document.getElementById('selection-grid');
            grid.innerHTML = '';
            animalDatabase.filter(a => (currentCat === 'All' || a.cat === currentCat) && a.name.toLowerCase().includes(search))
                .forEach(a => {
                    grid.innerHTML += `<div class="select-card" onclick="startBattle('${a.id}')">
                        <img src="${a.img}" alt="${a.name}">
                        <h3>${a.name}</h3>
                        <small>${a.cat}</small>
                    </div>`;
                });
        }

        function setCategory(cat) {
            currentCat = cat;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', b.innerText === cat));
            filterAnimals();
        }

        // BATTLE LOGIC
        function startBattle(id) {
            player = JSON.parse(JSON.stringify(animalDatabase.find(a => a.id === id)));
            player.maxHp = player.hp;
            const others = animalDatabase.filter(a => a.id !== id);
            enemy = JSON.parse(JSON.stringify(others[Math.floor(Math.random() * others.length)]));
            enemy.maxHp = enemy.hp;

            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('battle-screen').style.display = 'block';
            document.getElementById('p1-img').src = player.img;
            document.getElementById('p2-img').src = enemy.img;
            document.getElementById('p1-name').innerText = player.name;
            document.getElementById('p2-name').innerText = enemy.name;
            updateUI();
            renderMoves();
        }

        function renderMoves() {
            const container = document.getElementById('move-buttons');
            container.innerHTML = '';
            player.moves.forEach(m => {
                container.innerHTML += `<button class="move-btn" onclick="executeTurn('${m.name}')">${m.name}</button>`;
            });
        }

        function updateUI() {
            document.getElementById('p1-hp-fill').style.width = (player.hp / player.maxHp * 100) + "%";
            document.getElementById('p2-hp-fill').style.width = (enemy.hp / enemy.maxHp * 100) + "%";
            document.getElementById('p1-hp-text').innerText = `HP: ${Math.max(0, player.hp)}/${player.maxHp}`;
            document.getElementById('p2-hp-text').innerText = `HP: ${Math.max(0, enemy.hp)}/${enemy.maxHp}`;
            if (player.hp <= 0 || enemy.hp <= 0) setTimeout(initQuiz, 1000);
        }

        let pendingEnemyTurn = false;
        function executeTurn(moveName) {
            if (!isPlayerTurn) return;
            const move = player.moves.find(m => m.name === moveName);
            enemy.hp -= move.damage;
            if (move.heal) player.hp = Math.min(player.maxHp, player.hp + move.heal);
            showFact(player.name, move);
            pendingEnemyTurn = true;
        }

        function showFact(name, move) {
            document.getElementById('fact-text').innerText = `${name} uses ${move.name}!\n\n"${move.fact}"`;
            document.getElementById('fact-overlay').style.display = 'flex';
        }

        function closeFact() {
            document.getElementById('fact-overlay').style.display = 'none';
            updateUI();
            if (pendingEnemyTurn && enemy.hp > 0) {
                pendingEnemyTurn = false;
                isPlayerTurn = false;
                setTimeout(enemyTurn, 1000);
            } else { isPlayerTurn = true; }
        }

        function enemyTurn() {
            const move = enemy.moves[Math.floor(Math.random() * enemy.moves.length)];
            player.hp -= move.damage;
            if (move.heal) enemy.hp = Math.min(enemy.maxHp, enemy.hp + move.heal);
            showFact(enemy.name, move);
        }

        // QUIZ SYSTEM
        const quizData = [
            { q: "How many muscles are in an Elephant's trunk?", a: ["40,000", "600", "1,000", "40"], c: 0 },
            { q: "How far away can a Lion's roar be heard?", a: ["1 mile", "5 miles", "20 miles", "50 miles"], c: 1 },
            { q: "What is the fastest animal on Earth in a dive?", a: ["Cheetah", "Falcon", "Sailfish", "Eagle"], c: 1 },
            { q: "A shark's skeleton is made of what material?", a: ["Bone", "Cartilage", "Steel", "Muscle"], c: 1 }
        ];

        function initQuiz() {
            document.getElementById('quiz-overlay').style.display = 'flex';
            loadQuestion();
        }

        function loadQuestion() {
            if (quizStep >= 4) { showFinalScore(); return; }
            const data = quizData[quizStep];
            document.getElementById('quiz-q-num').innerText = `Question ${quizStep + 1} of 4`;
            document.getElementById('quiz-question').innerText = data.q;
            const optContainer = document.getElementById('quiz-options');
            optContainer.innerHTML = '';
            data.a.forEach((opt, i) => {
                optContainer.innerHTML += `<button class="move-btn" onclick="checkAnswer(${i})">${opt}</button>`;
            });
        }

        function checkAnswer(idx) {
            if (idx === quizData[quizStep].c) quizScore++;
            quizStep++;
            loadQuestion();
        }

        function showFinalScore() {
            document.getElementById('quiz-question').style.display = 'none';
            document.getElementById('quiz-options').style.display = 'none';
            document.getElementById('quiz-q-num').style.display = 'none';
            document.getElementById('quiz-score-screen').style.display = 'block';
            document.getElementById('final-score-val').innerText = `${quizScore} / 4`;
        }

        filterAnimals();
    </script>
</body>
</html>
